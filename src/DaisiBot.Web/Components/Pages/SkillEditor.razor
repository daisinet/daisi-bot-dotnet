@page "/my-skills/new"
@page "/my-skills/{Id}/edit"
@inject ISkillService SkillService
@inject NavigationManager Navigation

<h1 class="font-accent mb-4" style="color: white;">@(IsEdit ? "Edit Skill" : "Create New Skill")</h1>

<SkillSubmitForm ExistingSkill="_skill" AccountId="current-account"
                 OnSaved="OnSaved" OnCancel="OnCancel" />

@code {
    [Parameter] public string? Id { get; set; }

    private bool IsEdit => !string.IsNullOrEmpty(Id);
    private Skill? _skill;

    protected override async Task OnParametersSetAsync()
    {
        if (IsEdit && !string.IsNullOrEmpty(Id))
        {
            _skill = await SkillService.GetSkillAsync(Id);
        }
    }

    private void OnSaved() => Navigation.NavigateTo("/my-skills");
    private void OnCancel() => Navigation.NavigateTo("/my-skills");
}
