@page "/learn/skills"
@layout DaisiBot.Web.Components.Pages.Learn.LearnLayout

<h1 class="font-accent mb-4">Module 5 &middot; <span class="text-accent">Skills &amp; Marketplace</span></h1>

<div class="glass-card mb-4">
    <h4 class="font-accent">What Is a Skill?</h4>
    <p>
        A <strong>Skill</strong> is a versioned, authored component that injects a
        <em>system prompt template</em> into the agent's context. Skills give DaisiBot
        specialized knowledge or behavior &mdash; think of them as personality plug-ins
        that can also request specific tool groups.
    </p>
    <p class="mb-0">
        Example: a "Code Reviewer" skill might include a system prompt that tells the
        agent to focus on readability, security, and performance, and it would require
        the <strong>Coding</strong> and <strong>File</strong> tool groups.
    </p>
</div>

<div class="glass-card mb-4">
    <h4 class="font-accent">Skill Anatomy</h4>
    <table class="table table-dark table-bordered">
        <thead>
            <tr><th style="width:28%;">Field</th><th>Purpose</th></tr>
        </thead>
        <tbody>
            <tr><td class="text-accent">Name</td><td>Display name shown in the marketplace</td></tr>
            <tr><td class="text-accent">Version</td><td>Semantic version (e.g. 1.0.0)</td></tr>
            <tr><td class="text-accent">Author</td><td>Creator's display name</td></tr>
            <tr><td class="text-accent">ShortDescription</td><td>One-line summary for cards and lists</td></tr>
            <tr><td class="text-accent">Description</td><td>Full Markdown description rendered on the detail page</td></tr>
            <tr><td class="text-accent">Tags</td><td>Categories (productivity, coding, research, writing, creative, data, communication)</td></tr>
            <tr><td class="text-accent">RequiredToolGroups</td><td>Tool groups the skill needs enabled to function</td></tr>
            <tr><td class="text-accent">SystemPromptTemplate</td><td>The prompt injected into the conversation context</td></tr>
            <tr><td class="text-accent">IconUrl</td><td>Optional icon for marketplace display</td></tr>
            <tr><td class="text-accent">Visibility</td><td>Private (only you) or Public (marketplace)</td></tr>
            <tr><td class="text-accent">Status</td><td>Draft, PendingReview, Approved, or Rejected</td></tr>
        </tbody>
    </table>
</div>

<div class="glass-card mb-4">
    <h4 class="font-accent">Skill Frontmatter</h4>
    <p>
        Skills are defined with YAML frontmatter that DaisiBot parses via
        <code>SkillFrontmatter</code>:
    </p>
    <div class="code"><pre>
name: Code Reviewer
description: Reviews code for quality, security, and performance
version: 1.2.0
author: your-name
tags:
  - coding
  - productivity
tools:
  - CodingTools
  - FileTools
iconUrl: https://example.com/icon.png
isRequired: false</pre></div>
    <p class="mt-3 mb-0">
        The <code>isRequired</code> flag marks skills that are always active when installed
        (they cannot be toggled off per-conversation).
    </p>
</div>

<div class="glass-card mb-4">
    <h4 class="font-accent">Browsing &amp; Installing</h4>
    <ol>
        <li>
            <strong>Browse</strong> &ndash; Open the Skill Marketplace
            (<a href="/skills">/skills</a> on Web, <code>/skills</code> in TUI, or the Skills
            tab in MAUI). Search by keyword or filter by category tag.
        </li>
        <li>
            <strong>Review permissions</strong> &ndash; Every skill card shows its required
            tool groups. Elevated groups (e.g. File, Coding) are highlighted with an
            <span class="badge badge-elevated">Elevated</span> badge so you know what access
            you're granting.
        </li>
        <li>
            <strong>Install</strong> &ndash; Click "Install" to add the skill to your account.
            An <code>InstalledSkill</code> record links the SkillId to your AccountId with a
            timestamp. The skill's system prompt is now injected into conversations where it's enabled.
        </li>
        <li>
            <strong>Enable per-conversation</strong> &ndash; Installed skills are listed in
            <code>UserSettings.EnabledSkillIdsCsv</code>. You can toggle them on or off for
            individual conversations or bots.
        </li>
    </ol>
</div>

<div class="glass-card mb-4">
    <h4 class="font-accent">Creating Your Own Skill</h4>
    <ol>
        <li>Navigate to <a href="/my-skills/new">My Skills &rarr; Create New Skill</a>.</li>
        <li>Fill out the <code>SkillSubmitForm</code>: name, version, description, tags, required tool groups, and the system prompt template.</li>
        <li>Save as <strong>Draft</strong> to iterate privately.</li>
        <li>When ready, click <strong>Submit for Review</strong>.</li>
    </ol>
</div>

<div class="glass-card mb-4">
    <h4 class="font-accent">Publishing Workflow</h4>
    <div class="d-flex align-items-center gap-2 flex-wrap mt-2">
        <span class="badge bg-secondary px-3 py-2">Draft</span>
        <span class="text-muted">&rarr;</span>
        <span class="badge px-3 py-2" style="background:#5a3d2d; color:#ff9800;">Pending Review</span>
        <span class="text-muted">&rarr;</span>
        <span class="badge bg-success px-3 py-2">Approved</span>
        <span class="text-muted">or</span>
        <span class="badge bg-danger px-3 py-2">Rejected</span>
    </div>
    <p class="mt-3 mb-0">
        Only <strong>Approved</strong> skills with <strong>Public</strong> visibility appear
        in the marketplace. Rejected skills include feedback &mdash; fix the issues and
        re-submit.
    </p>
</div>

<div class="glass-card recall-checkpoint">
    <h4 class="font-accent">Active Recall Checkpoint</h4>
    <p>Cover the answers and test yourself before peeking.</p>

    <div class="recall-question">
        <p><strong>1.</strong> What does a skill inject into the conversation context?</p>
        <details><summary class="text-accent">Reveal answer</summary>
            <p class="mt-2">A system prompt template &mdash; specialized instructions or persona that shape the agent's behavior.</p>
        </details>
    </div>

    <div class="recall-question">
        <p><strong>2.</strong> What are the four skill statuses in order?</p>
        <details><summary class="text-accent">Reveal answer</summary>
            <p class="mt-2">Draft &rarr; PendingReview &rarr; Approved (or Rejected).</p>
        </details>
    </div>

    <div class="recall-question">
        <p><strong>3.</strong> What does the <code>isRequired</code> frontmatter flag do?</p>
        <details><summary class="text-accent">Reveal answer</summary>
            <p class="mt-2">Marks the skill as always active when installed &mdash; it cannot be toggled off per-conversation.</p>
        </details>
    </div>

    <div class="recall-question">
        <p><strong>4.</strong> How does DaisiBot indicate that a skill requires elevated permissions?</p>
        <details><summary class="text-accent">Reveal answer</summary>
            <p class="mt-2">An "Elevated" badge (orange) is shown next to the tool group on the skill card, distinguishing it from "Standard" (green) permissions.</p>
        </details>
    </div>
</div>

<div class="d-flex justify-content-between mt-4">
    <a href="/learn/conversations" class="btn btn-outline-light">&larr; Module 4</a>
    <a href="/learn/bots" class="btn btn-accent">Module 6: Bots &rarr;</a>
</div>
